<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.hotel.dao.HotelDao">
<select id="getHotelInfoByCityCodeAndName" parameterType="map" resultType="Hotel">
select id,latitude,longitude,address,name from (select * from hotel where cityCode=#{cityCode} ) as A where name like ${name}  
</select>

<select id="getRecommendHotelByCity" parameterType="java.lang.String" resultMap="HotelResultMap">
select h.*,hp.id pid,hp.picUrl picUrl,hp.state,hp.hid hidpstate from hotel as h left join  hotel_pic as hp on h.id=hp.hid where cityCode=#{cityCode} and h.state=1 and h.isRecommend=1
</select>
<resultMap type="com.hotel.models.Hotel" id="HotelResultMap">
<id column="id" property="id"/>
<result column="name" property="name"/>
<result column="address" property="address"/>
<result column="longitude" property="longitude"/>
<result column="latitude" property="latitude"/>
<result column="administrator" property="administrator"/>
<result column="phoneNumber" property="phoneNumber"/>
<result column="startLevel" property="startLevel"/>
<result column="officialURL" property="officialURL"/>
<result column="headPicURL" property="headPicURL"/>
<result column="type" property="type"/>
<result column="level" property="level"/>
<result column="createTime" property="createTime"/>
<result column="state" property="state"/>
<result column="cityCode" property="cityCode"/>
<result column="isRecommend" property="isRecommend"/>
<result column="recommendOrderCode" property="recommendOrderCode"/>
<collection property="picPath" ofType="com.hotel.models.HotelPic">
<id column="pid" property="id"/>
<result column="hid" property="hid"/>
<result column="picUrl" property="picUrl"/>
<result column="pstate" property="state"/>
</collection>
</resultMap>
</mapper> 